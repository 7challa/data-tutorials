# Learning the Ropes of Apache NiFi

Version 1 for HDP 2.4 updated June 13, 2016

## Introduction

HDF is the first integrated platform that solves the real time challenges of collecting and transporting data from a multitude of sources and provides interactive command and control of live flows with full and automated data provenance. HDF is a single combined platform that provides the data acquisition, simple event processing, transport and delivery mechanism designed to accommodate the diverse dataflows generated by a world of connected people, systems, and things.

For the purposes of this tutorial, assume that a city planning board is evaluating the need for a new highway.  This decision is  dependant on current traffic patterns, particularly as other roadwork initiatives are under way.  Integrating live data poses a problem because traffic analysis has traditionally been done using historical, aggregated traffic counts.  To improve traffic analysis, the city planner wants to leverage real-time data to get a deeper understanding of traffic patterns.  HDF was selected for for this real-time data integration. 

## Goals and Objectives

The goal of this tutorial is to provide you with an opportunity to interact with Apache NiFi features while building a dataflow. This lab requires no direct programming and does not dwell on syntax and other features of flow-based programming.

The learning objectives of this lab are to:
- Understand the fundamental concepts of Apache NiFi
- Introduce NiFiâ€™s HTML interface: navigate the UI; design, control, transform, and monitor dataflow
- Introduce NiFi processor configuration, relationships, data provenance, and documentation
- Create dataflows
- Incorporate APIs into a NiFi dataflow
- Learn about NiFi templates
- Create Process Groups


## Pre-Requisites
- Downloaded and installed Hortonworks Sandbox (Needed for Step 2 if you go with Option 1 for NiFi installation)
- For Windows users, to run linux terminal commands in these tutorials, download [Git Bash](https://openhatch.org/missions/windows-setup/install-git-bash).


## Lab Series Overview

The lab series is based on transit location data gathered from NextBus XML Live Feed. In this lab, we work with San Francisco MUNI Transit agency data handling vehicle locations, speeds, and other variables.

The lab consists of four sections:

**Lab 0** - Learn about your lab environment. Get NiFi up and running on Hortonworks Sandbox or your local machine.

**Lab 1** - Become familiar with NiFi HTML interface. Open NiFi interface; explore its features. Create an agile dataflow project by creating and configuring eleven processors. You will learn to ingest data from transit location xml simulator, extract transit location detail attributes from flowfiles, route those desired attributes to a converted JSON file. Run the dataflow and verify the results in a terminal.

**Lab 2** - Add geographic location enrichment to the dataflow; incorporate Google Places Nearby API into the dataflow to retrieve places nearby the vehicle's location(latitude and longitude). Learn how easy external API integration is with NiFi.

**Lab 3** - Ingest NextBus's live stream data for San Francisco Muni agency.

![Completed-dataflow-for-lab3](/assets/learning-ropes-nifi-lab-series/lab-intro-nifi-learning-ropes/completed-dataflow-rd1-lab3.png)

The dataflow in the image above is what you will learn to build in lab 3. In the introduction of each lab, you are provided a template file of the completed dataflow built for that lab section. The labs are also step by step in which you can build the dataflows from scratch, so we highly encourage the templates be used for verification. Each lab builds on the previous. Feel free to experiment in any way you like, if you get stuck, you can still go onto the next lab with everything in place by selecting the appropriate template.


> Note: **Word about lab instructions**: each section in this guide begins with a description of what you will learn or accomplish in your NiFi training. The essence of these sections is to give you background of what you will do in the lab section. The labs will always be followed by step-by-step instructions.
