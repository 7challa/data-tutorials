

<div class="tutorial-content">
  <p>Apache Hadoop clusters grow and change with use. Maybe you used <a href="http://hortonworks.com/hadoop/ambari/" title="Apache Ambari">Apache Ambari</a> to build your initial cluster with a base set of Hadoop services targeting known use cases and now you want to add other services for new use cases. Or you may just need to expand the storage and processing capacity of the cluster.</p>

<p>Ambari can help in both scenarios. In this blog, we'll cover a few different ways that Ambari can help you expand your cluster.</p>

<h3 id="adding-new-hosts-to-the-cluster">Adding New Hosts to the Cluster</h3>

<p>You can add more hosts to the cluster and assign these hosts to run as DataNodes and NodeManagers. This allows you to expand both your HDFS storage capacity and your YARN processing power.</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/adding-hosts-to-ambari/ambari_11.png" alt="ambari_1" /></p>

<ol>
  <li>In the Ambari Web interface, browse to the Hosts page and click the Actions button.</li>
  <li>Select the option to "Add New Hosts," which will launch the Add New Hosts wizard that walks you thru the host registration process.</li>
  <li>Select which slave components to include on the host (such as DataNode and NodeManager) and configure those components (in case you want a unique configuration for this new set of machines).</li>
  <li>Ambari will then deploy the software packages on the hosts, push the configuration to the hosts, and start the components so they join their respective Services.</li>
</ol>

<p>Learn more about "Adding Hosts to a Cluster" in the <a href="http://docs.hortonworks.com/HDPDocuments/Ambari-1.6.1.0/bk_Monitoring_Hadoop_Book/content/monitor-chap2-4b_2x.html" title="Ambari User's Guide">Ambari User's Guide</a>.</p>

<h3 id="adding-components-to-existing-cluster-hosts">Adding Components to Existing Cluster Hosts</h3>

<p>If you already have enough hosts in the cluster but you are not running all components on all the machines, you can expand your cluster by adding components to machines.</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/adding-hosts-to-ambari/ambari_21.png" alt="ambari_2" /></p>

<p>For example, if you have hosts that are not running DataNode or NodeManager components, follow these steps in Ambari Web:</p>

<ol>
  <li>Browse to the specific host page and click the "Add" button.</li>
  <li>Choose any additional components that are not already installed on that host. For example, if you want to make an existing host also serve as a DataNode, you select DataNode from the dropdown and Ambari will install the software packages.</li>
  <li>Ambari pushes any necessary configurations and the DataNode joins the HDFS service as a slave component.</li>
</ol>

<h3 id="replacing-hosts-in-the-cluster">Replacing Hosts in the Cluster</h3>

<p>Suppose you want to expand your cluster capacity by retiring (i.e. "deleting") hosts from your cluster and adding new hosts with updated hardware for more memory, drives and CPU power. Earlier we talked about adding hosts to the cluster. In this example, we will first remove the older hosts from the cluster.</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/adding-hosts-to-ambari/ambari_31.png" alt="ambari_3" /></p>

<ol>
  <li>Delete the hosts from Ambari.</li>
  <li>Browse to the Hosts page in Ambari Web, and in the Host Actions menu, select "Delete Host."</li>
  <li>Ambari will initiate the delete operation, which removes slave components on the host and from their respective services (such as removing a DataNode from HDFS).</li>
</ol>

<p><strong>Note:</strong> be sure to <a href="http://docs.hortonworks.com/HDPDocuments/Ambari-1.6.1.0/bk_Monitoring_Hadoop_Book/content/Decommissioning_Master_and_Slave_Nodes.html" title="Decommission">decommission</a> the components on the host prior to performing the delete.</p>

<p>Learn more about "Deleting a Host from a Cluster" in the <a href="http://docs.hortonworks.com/HDPDocuments/Ambari-1.6.1.0/bk_Monitoring_Hadoop_Book/content/Delete_a_Host_From_Cluster.html" title="Ambari User's Guide">Ambari User's Guide</a>.</p>

<h3 id="adding-services-to-the-cluster">Adding Services to the Cluster</h3>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/adding-hosts-to-ambari/ambari_41.png" alt="ambari_4" /></p>

<p>Ambari supports installing and managing Services that are logically grouped into a "Stack." When you perform the initial cluster install, you select the services to include in the cluster. For example, you might initially select HDFS, YARN, MapReduce and Tez. Over time, as your Hadoop needs expand, you might want to add other Services to that cluster, such as Hive or HBase.</p>

<p>Here's how you would do that:</p>

<ol>
  <li>Using the Add Service wizard, browse to the Services page in Ambari Web.</li>
  <li>From the Actions menu, select "Add Service."</li>
  <li>The wizard launches, and then you can select from the list of Services not already installed for that Stack.</li>
</ol>

<p>Learn more about "Adding a Service" in the <a href="http://docs.hortonworks.com/HDPDocuments/Ambari-1.6.1.0/bk_Monitoring_Hadoop_Book/content/monitor-chap2-3-1-2_2x.html" title="Ambari User's Guide">Ambari User's Guide</a>.</p>

</div>

<div id="tutorial-footer">
  <hr>
  <h2>Tutorial Q&amp;A and Reporting Issues</h2>
  <p>If you need help or have questions with this tutorial, please first check HCC for existing Answers to questions on this tutorial using the Find Answers button.  If you don't find your answer you can post a new HCC question for this tutorial using the Ask Questions button.</p>
  <p><a class="btn" href="https://community.hortonworks.com/topics/tutorial-430.html" role="button">Find Answers</a> <a class="btn pull-right" href="https://community.hortonworks.com/questions/ask.html?space=81&topics=tutorial-430&topics=hdp-2.4.0" role="button">Ask Questions</a></p>
  <p>Tutorial Name: <strong>Using APache Ambari to Add new Nodes to your Existing Cluster</strong></p>
  <p>HCC Tutorial Tag:<strong> tutorial-430</strong> and <strong>hdp-2.4.0</strong></p>
  <p>If the tutorial has multiple labs please indicate which lab your question corresponds to. Please provide any feedback related to that lab.</p>
  <p>All Hortonworks, partner and community tutorials are posted in the Hortonworks github and can be contributed via the <a href="https://github.com/hortonworks/tutorials/wiki">Hortonworks Tutorial Contribution Guide</a>.  If you are certain there is an issue or bug with the tutorial, please <a href="https://github.com/hortonworks/tutorials/wiki#issues-with-tutorials">create an issue</a> on the repository and we will do our best to resolve it!</p>
</div>
