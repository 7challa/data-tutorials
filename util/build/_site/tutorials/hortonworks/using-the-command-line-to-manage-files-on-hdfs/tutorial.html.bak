

<div class="tutorial-content">
  <h1 id="using-the-command-line-to-manage-files-on-hdfs">Using the Command Line to Manage Files on HDFS</h1>

<h3 id="introduction">Introduction</h3>

<p>In this tutorial, we will walk through some of the basic Hadoop Distributed File System (HDFS) commands you will need to manage files on HDFS.</p>

<h2 id="pre-requisites">Pre-Requisites</h2>
<ul>
  <li>Downloaded and Installed latest <a href="http://hortonworks.com/products/hortonworks-sandbox/#install">Hortonworks Sandbox</a></li>
  <li><a href="http://hortonworks.com/hadoop-tutorial/learning-the-ropes-of-the-hortonworks-sandbox/">Learning the Ropes of the Hortonworks Sandbox</a></li>
  <li>Create popularNames.txt file and save it on your local file system</li>
  <li>Allow yourself around <strong>1 hour</strong> to complete this tutorial.</li>
</ul>

<p>1.) Open your vi editor with the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vi popularNames.txt
</code></pre>
</div>

<blockquote>
  <p><strong>Note:</strong> You can create any text file with data you want or you can follow the example. You could also download text file.</p>
</blockquote>

<p>2.) In vi, press <code class="highlighter-rouge">i</code> to insert text. Copy and paste the following data into the text file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Rank    Male            Female
1	Noah	        Emma
2	Liam	        Olivia
3	Mason	        Sophia
4	Jacob	        Isabella
5	William	        Ava
6	Ethan	        Mia
7	Michael	        Emily
8	Alexander	Abigail
9	James	        Madison
10	Daniel	        Charlotte
</code></pre>
</div>

<p>3.) Press <code class="highlighter-rouge">esc</code> button and <code class="highlighter-rouge">:wq</code> to save and quit the vi.</p>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/local_file_system_path_popularNames_txt.png" alt="local_file_system_path_popularNames_txt" /></p>

<blockquote>
  <p>popularNames.txt in the example above is located in <code class="highlighter-rouge">~</code> directory.</p>
</blockquote>

<h2 id="outline">Outline</h2>
<ul>
  <li><a href="#create-a-directory-in-hdfs-upload-a-file-and-list-contents">Step 1: Create a directory in HDFS, Upload a file and List Contents</a></li>
  <li><a href="#find-out-space-utilization-in-a-hdfs-directory">Step 2: Find Out Space Utilization in a HDFS Directory</a></li>
  <li><a href="#download-files-hdfs-to-local-file-system">Step 3: Download Files From HDFS to Local File System</a></li>
  <li><a href="#explore-two-advanced-features">Step 4: Explore Two Advanced Features</a></li>
  <li><a href="#use-help-command-access-hadoop-command-manual">Step 5: Use Help Command to access Hadoop Command Manual</a></li>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#further-reading">Further Reading</a></li>
</ul>

<h3 id="step-1-create-a-directory-in-hdfs-upload-a-file-and-list-contents-a-idcreate-a-directory-in-hdfs-upload-a-file-and-list-contentsa">Step 1: Create a directory in HDFS, Upload a file and List Contents <a id="create-a-directory-in-hdfs-upload-a-file-and-list-contents"></a></h3>

<p>Let’s learn by writing the syntax. You will be able to copy and paste the following example commands into your terminal:</p>

<h4 id="hadoop-fs--mkdir">hadoop fs -mkdir:</h4>

<ul>
  <li>Takes the path uri’s as an argument and creates a directory or multiple directories.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:
        # hadoop fs -mkdir &lt;paths&gt;
# Example:
        hadoop fs -mkdir /user/hadoop
        hadoop fs -mkdir /user/hadoop/dir1 /user/hadoop/dir2 /user/hadoop/dir3
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step1_createDir_hdfs_commandLineManageFiles_hdfs.png" alt="create_3_dir" /></p>

<h4 id="hadoop-fs--put">hadoop fs -put:</h4>

<ul>
  <li>Copies single src file or multiple src files from local file system to the Hadoop Distributed File System.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:
        # hadoop fs -put &lt;local-src&gt; ... &lt;HDFS_dest_path&gt;
# Example:
        hadoop fs -put popularNames.txt /user/hadoop/dir1/popularNames.txt
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step1_createDir_hdfs_commandLineManageFiles_hdfs.png" alt="upload_file_local_file_system" /></p>

<h4 id="hadoop-fs--ls">hadoop fs -ls:</h4>

<ul>
  <li>Lists the contents of a directory</li>
  <li>For a file, returns stats of a file</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:  
        # hadoop  fs  -ls  &lt;args&gt;  
# Example:
        hadoop fs -ls /user/hadoop
        hadoop fs -ls /user/hadoop/dir1
        hadoop fs -ls /user/hadoop/dir1/popularNames.txt
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step1_listContentDir_commandLineManageFiles_hdfs.png" alt="list_contents_directory" /></p>

<h3 id="step-2-find-out-space-utilization-in-a-hdfs-directory-a-idfind-out-space-utilization-in-a-hdfs-directorya">Step 2: Find Out Space Utilization in a HDFS Directory <a id="find-out-space-utilization-in-a-hdfs-directory"></a></h3>

<h4 id="hadoop-fs--du">hadoop fs -du:</h4>

<ul>
  <li>Displays size of files and directories contained in the given directory or the size of a file if its just a file.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:  
        # hadoop fs -du URI
# Example:
        hadoop fs -du  /user/hadoop/ /user/hadoop/dir1/popularNames.txt
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step2_displayFileSize_commandLineManageFiles_hdfs.png" alt="display_sizes_dir_files" /></p>

<h3 id="step-3-download-file-from-hdfs-to-local-file-system-a-iddownload-files-hdfs-to-local-file-systema">Step 3: Download File From HDFS to Local File System <a id="download-files-hdfs-to-local-file-system"></a></h3>

<h4 id="hadoop-fs--get">hadoop fs -get:</h4>

<ul>
  <li>Copies/Downloads files from HDFS to the local file system</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:
        # hadoop fs -get &lt;hdfs_src&gt; &lt;localdst&gt;
# Example:
        hadoop fs -get /user/hadoop/dir1/popularNames.txt /home/
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step3_download_hdfs_file_to_localsystem_commandLineManageFiles_hdfs.png" alt="enter image description here" /></p>

<h3 id="step-4-explore-two-advanced-features-a-idexplore-two-advanced-featuresa">Step 4: Explore Two Advanced Features <a id="explore-two-advanced-features"></a></h3>

<h4 id="hadoop-fs--getmerge">hadoop fs -getmerge</h4>

<ul>
  <li>Takes a source directory file or files as input and concatenates files in src into the local destination file.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:
        # hadoop fs -getmerge &lt;src&gt; &lt;localdst&gt; [addnl]
# Option:
        # addnl: can be set to enable adding a newline on end of each file
# Example:
        hadoop fs -getmerge /user/hadoop/dir1/  ./popularNamesV2.txt
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step4_getmerge_to_localDestn_commandLineManageFiles_hdfs.png" alt="copy_dir1_to_dir3" /></p>

<blockquote>
  <p>Copies all files from dir1 and stores them into popularNamesV2.txt</p>
</blockquote>

<h4 id="hadoop-distcp">hadoop distcp:</h4>

<ul>
  <li>Copy file or directories recursively</li>
  <li>It is a tool used for large inter/intra-cluster copying</li>
  <li>It uses MapReduce to effect its distribution copy, error handling and recovery, and reporting</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># Usage:
        # hadoop distcp &lt;src-url&gt; &lt;dest-url&gt;
# Example:
        hadoop distcp /user/hadoop/dir1/ /user/hadoop/dir3/
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step4_copy_file_recursively_commandLineManageFiles_hdfs.png" alt="copy_file_recursively_distcp" /></p>

<blockquote>
  <p>distcp: copies dir1 and all its contents to dir3</p>
</blockquote>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step4_visual_copy_recursively_distcp_commandLineManageFiles_hdfs.png" alt="copy_dir1_to_dir3" /></p>

<blockquote>
  <p>Visual result of distcp operation’s aftermath, dir1 gets copied to dir3</p>
</blockquote>

<h3 id="step-5-use-help-command-to-access-hadoop-command-manual-a-iduse-help-command-access-hadoop-command-manuala">Step 5: Use Help Command to access Hadoop Command Manual <a id="use-help-command-access-hadoop-command-manual"></a></h3>

<p>Help command opens the list of commands supported by Hadoop Data File System (HDFS)</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Example:  
        hadoop  fs  -help
</code></pre>
</div>

<p><img src="/assets/using-the-command-line-to-manage-hdfs/step5_help_commandLineManageFiles_hdfs.png" alt="hadoop_help_command_manual" /></p>

<p>Hope this short tutorial was useful to get the basics of file management.</p>

<p>##Summary <a id="summary">
Congratulations! We just learned to use commands to manage our files in HDFS. We know how to create, upload and list the the contents in our directories. We also acquired the skills to download files from HDFS to our local file system and explored a few advanced features of the command line.</a></p>

<h2 id="further-reading-a-idfurther-readinga">Further Reading <a id="further-reading"></a></h2>
<ul>
  <li><a href="http://hortonworks.com/hadoop/hdfs/">HDFS Overview</a></li>
  <li><a href="https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/FileSystemShell.html">Hadoop File System Documentation</a></li>
</ul>

</div>

<div id="tutorial-footer">
  <hr>
  <h2>Tutorial Q&amp;A and Reporting Issues</h2>
  <p>If you need help or have questions with this tutorial, please first check HCC for existing Answers to questions on this tutorial using the Find Answers button.  If you don't find your answer you can post a new HCC question for this tutorial using the Ask Questions button.</p>
  <p><a class="btn" href="https://community.hortonworks.com/topics/tutorial-120.html" role="button">Find Answers</a> <a class="btn pull-right" href="https://community.hortonworks.com/questions/ask.html?space=81&topics=tutorial-120&topics=hdp-2.4.0" role="button">Ask Questions</a></p>
  <p>Tutorial Name: <strong>Using the Command Line to Manage Files on HDFS</strong></p>
  <p>HCC Tutorial Tag:<strong> tutorial-120</strong> and <strong>hdp-2.4.0</strong></p>
  <p>If the tutorial has multiple labs please indicate which lab your question corresponds to. Please provide any feedback related to that lab.</p>
  <p>All Hortonworks, partner and community tutorials are posted in the Hortonworks github and can be contributed via the <a href="https://github.com/hortonworks/tutorials/wiki">Hortonworks Tutorial Contribution Guide</a>.  If you are certain there is an issue or bug with the tutorial, please <a href="https://github.com/hortonworks/tutorials/wiki#issues-with-tutorials">create an issue</a> on the repository and we will do our best to resolve it!</p>
</div>
