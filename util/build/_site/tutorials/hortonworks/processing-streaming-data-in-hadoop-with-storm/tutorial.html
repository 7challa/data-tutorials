

<div class="tutorial-content">
  <h3 id="introduction">Introduction</h3>

<p>In this tutorial, we will review Apache Storm Infrastructure, download a storm jar file and deploy a WordCount Topology. After we run the topology, we will view storm log files because it is helpful for debugging.</p>

<h2 id="pre-requisites">Pre-Requisites</h2>
<ul>
  <li>Downloaded and Installed latest <a href="http://hortonworks.com/products/hortonworks-sandbox/#install">Hortonworks Sandbox</a></li>
  <li><a href="http://hortonworks.com/hadoop-tutorial/learning-the-ropes-of-the-hortonworks-sandbox/">Learning the Ropes of the Hortonworks Sandbox</a></li>
  <li>Allow yourself around one hour to complete this tutorial</li>
</ul>

<h2 id="outline">Outline</h2>
<ul>
  <li><a href="#what-is-apache-storm">What is Apache Storm?</a></li>
  <li><a href="#check-storm-service-running">Step 1: Check Storm Service is Running</a></li>
  <li><a href="#download-storm-topology-jar-file">Step 2: Download the Storm Topology JAR file</a></li>
  <li><a href="#check-classes-available-jar">Step 3: Check Classes Available in jar</a></li>
  <li><a href="#run-word-count-topology">Step 4: Run Word Count Topology</a></li>
  <li><a href="#open-storm-ui">Step 5: Open Storm UI</a></li>
  <li><a href="#click-on-wordcount-topology">Step 6: Click on WordCount Topology</a></li>
  <li><a href="#navigate-to-bolt-section">Step 7: Navigate to Bolt Section</a></li>
  <li><a href="#navigate-to-executor-section">Step 8: Navigate to Executor Section</a></li>
  <li><a href="#appendix-a-view-log-files">Appendix A: View Storm Log Files</a></li>
  <li><a href="#appendix-b-install-maven-download-storm-kit">Appendix B: Install Maven and Get Started Storm Starter Kit</a></li>
  <li><a href="#further-reading">Further Reading</a></li>
</ul>

<h3 id="what-is-apache-storm-a-idwhat-is-apache-storma">What is Apache Storm? <a id="what-is-apache-storm"></a></h3>

<p><a href="http://hortonworks.com/hadoop/storm">Apache Storm</a> is an open source engine which can process data in realtime using its distributed architecture. Storm is simple and flexible. It can be used with any programming language of your choice.</p>

<p>Let's look at the various components of a Storm Cluster:</p>

<ol>
  <li><strong>Nimbus node. </strong>The master node (Similar to JobTracker)</li>
  <li><strong>Supervisor nodes.</strong> Starts/stops workers &amp; communicates with Nimbus through Zookeeper</li>
  <li><strong>ZooKeeper nodes.</strong> Coordinates the Storm cluster</li>
</ol>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/storm_architecture.png" alt="Storm Architecture" /></p>

<blockquote>
  <p>Architechture: Nimbus, Zookeeper, Supervisor</p>
</blockquote>

<p>Here are a few terminologies and concepts you should get familiar with before we go hands-on:</p>

<ul>
  <li><strong>Tuples.</strong> An ordered list of elements. For example, a "4-tuple" might be (7, 1, 3, 7)</li>
  <li><strong>Streams.</strong> An unbounded sequence of tuples.</li>
  <li><strong>Spouts.</strong> Sources of streams in a computation (e.g. a Twitter API)</li>
  <li><strong>Bolts.</strong> Process input streams and produce output streams. They can:
    <ul>
      <li>Run functions;</li>
      <li>Filter, aggregate, or join data;</li>
      <li>Talk to databases.</li>
    </ul>
  </li>
  <li><strong>Topologies.</strong> The overall calculation, represented visually as a network of spouts and bolts</li>
</ul>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/storm_basic_concepts.png" alt="Storm Basic Concepts" /></p>

<blockquote>
  <p>Basic Concepts Map: Topologies process data when it comes streaming in from the spout, the bolt processes it and the results are passed into Hadoop.</p>
</blockquote>

<h2 id="installation-and-setup-verification">Installation and Setup Verification:</h2>

<h3 id="step-1-check-storm-service-is-running-a-idcheck-storm-service-runninga">Step 1: Check Storm Service is Running <a id="check-storm-service-running"></a></h3>

<p>Let's check if the sandbox has storm processes up and running by login into Ambari and look for Storm in the services listed:</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/check_storm_service_psdh_storm.png" alt="" /></p>

<h3 id="step-2-download-the-storm-topology-jar-file-a-iddownload-storm-topology-jar-filea">Step 2: Download the Storm Topology JAR file <a id="download-storm-topology-jar-file"></a></h3>

<p>Now let's look at a Streaming use case using Storm's Spouts and Bolts processes. For this we will be using a simple use case, however it should give you the real life experience of running and operating on Hadoop Streaming data using this topology.</p>

<p>Let's get the jar file which is available in the Storm Starter kit. This has other examples as well, but let's use the WordCount operation and see how to turn it ON. We will also track this in Storm UI.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>wget http://public-repo-1.hortonworks.com/HDP-LABS/Projects/Storm/0.9.0.1/storm-starter-0.0.1-storm-0.9.0.1.jar
</code></pre>
</div>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/download_storm_starter_kit.png" alt="enter image description here" /></p>

<h3 id="step-3-check-classes-available-in-jar-a-idcheck-classes-available-jara">Step 3: Check Classes Available in jar <a id="check-classes-available-jar"></a></h3>

<p>In the Storm example Topology, we will be using three main parts or processes:</p>

<ol>
  <li>Sentence Generator Spout</li>
  <li>Sentence Split Bolt</li>
  <li>WordCount Bolt</li>
</ol>

<p>You can check the classes available in the jar as follows:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>jar -xvf storm-starter-0.0.1-storm-0.9.0.1.jar | grep Sentence  
jar -xvf storm-starter-0.0.1-storm-0.9.0.1.jar | grep Split  
jar -xvf storm-starter-0.0.1-storm-0.9.0.1.jar | grep WordCount
</code></pre>
</div>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/check_classes_available_jar.png" alt="enter image description here" /></p>

<h3 id="step-4-run-word-count-topology-a-idrun-word-count-topologya">Step 4: Run Word Count Topology <a id="run-word-count-topology"></a></h3>

<p>Let's run the storm job. It has a Spout job to generate random sentences while the bolt counts the different words. There is a split Bolt Process along with the Wordcount Bolt Class.</p>

<p>Let's run the Storm Jar file.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@sandbox ~]# storm jar storm-starter-0.0.1-storm-0.9.0.1.jar storm.starter.WordCountTopology WordCount -c storm.starter.WordCountTopology WordCount -c nimbus.host<span class="o">=</span>sandbox.hortonworks.com
</code></pre>
</div>

<blockquote>
  <p><strong>Note:</strong> For Sandbox versions without Storm preinstalled, navigate to <code class="highlighter-rouge">/usr/lib/storm/bin/</code> directory to run the command above.</p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/run_storm_topology_wordcount.png" alt="enter image description here" /></p>

<h3 id="step-5-open-storm-ui-a-idopen-storm-uia">Step 5: Open Storm UI <a id="open-storm-ui"></a></h3>

<p>Let's use Storm UI and look at it graphically:<br />
<img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/view_storm_topology_stormui.png" alt="enter image description here" /></p>

<blockquote>
  <p>You should notice the Storm Topology, WordCount in the Topology summary.</p>
</blockquote>

<h3 id="step-6-click-on-wordcount-topology-a-idclick-on-wordcount-topologya">Step 6: Click on WordCount Topology <a id="click-on-wordcount-topology"></a></h3>

<p>The topology is located Under Topology Summary. You will see the following:</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/click_wordcount_topology.png" alt="enter image description here" /></p>

<h3 id="step-7-navigate-to-bolt-section-a-idnavigate-to-bolt-sectiona">Step 7: Navigate to Bolt Section <a id="navigate-to-bolt-section"></a></h3>

<p>Click on <strong>count</strong>.</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/click_count_bolt_section.png" alt="enter image description here" /></p>

<h3 id="step-8-navigate-to-executor-section-a-idnavigate-to-executor-sectiona">Step 8: Navigate to Executor Section <a id="navigate-to-executor-section"></a></h3>

<p>Click on any port and you will be able to view the results.</p>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/count_executor_section_ports.png" alt="enter image description here" /></p>

<p>You just processed streaming data using Apache Storm. Congratulations on completing the Tutorial!</p>

<h2 id="appendix-a-view-storm-log-files-a-idappendix-a-view-log-filesa">Appendix A: View Storm Log Files <a id="appendix-a-view-log-files"></a></h2>

<p>Lastly but most importantly, you can always look at the log files. These logs are extremely useful for debugging or status finding. Their directory location:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="o">[</span>root@sandbox ~]# <span class="nb">cd</span> /var/log/storm

<span class="o">[</span>root@sandbox storm]# ls -ltr
</code></pre>
</div>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/view_log_files_debugging.png" alt="enter image description here" /></p>

<h2 id="appendix-b-install-maven-and-get-started-with-storm-starter-kit-a-idappendix-b-install-maven-download-storm-kita">Appendix B: Install Maven and Get Started with Storm Starter Kit <a id="appendix-b-install-maven-download-storm-kit"></a></h2>

<h3 id="install-maven">Install Maven</h3>

<p>Download and install Apache Maven as shown in the commands below</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>curl -o /etc/yum.repos.d/epel-apache-maven.repo https://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo
yum -y install apache-maven
mvn -version
</code></pre>
</div>

<p><img src="https://raw.githubusercontent.com/hortonworks/tutorials/hdp/assets/processing-streaming-data-in-hadoop-with-storm/maven_install_version_streaming_storm.png" alt="enter image description here" /></p>

<h3 id="get-started-with-storm-starter-kit">Get Started with Storm Starter Kit</h3>

<p>Download the Storm Starter Kit and try other topology examples, such as ExclamationTopology and ReachTopology.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone git://github.com/apache/storm.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>storm/examples/storm-starter
</code></pre>
</div>

<h2 id="further-reading-a-idfurther-readinga">Further Reading <a id="further-reading"></a></h2>

<ul>
  <li>Learn to setup the <a href="https://github.com/apache/storm/tree/master/examples/storm-starter">Apache Storm-Starter Kit from Github</a> manually with their guide.</li>
  <li><a href="http://storm.apache.org/talksAndVideos.html">Apache Storm Talks and Slides</a></li>
  <li><a href="http://storm.apache.org/documentation.html">Basics of Storm</a></li>
  <li><a href="http://hortonworks.com/hadoop/storm/">Apache Storm</a></li>
</ul>


</div>

<div id="tutorial-footer">
  <hr>
  <h2>Tutorial Q&amp;A and Reporting Issues</h2>
  <p>If you need help or have questions with this tutorial, please first check HCC for existing Answers to questions on this tutorial using the Find Answers button.  If you don't find your answer you can post a new HCC question for this tutorial using the Ask Questions button.</p>
  <p><a class="btn" href="https://community.hortonworks.com/topics/tutorial-240.html" role="button">Find Answers</a> <a class="btn pull-right" href="https://community.hortonworks.com/questions/ask.html?space=81&topics=tutorial-240&topics=hdp-2.4.0" role="button">Ask Questions</a></p>
  <p>Tutorial Name: <strong>Processing Streaming Data in Hadoop with Storm</strong></p>
  <p>HCC Tutorial Tag:<strong> tutorial-240</strong> and <strong>hdp-2.4.0</strong></p>
  <p>If the tutorial has multiple labs please indicate which lab your question corresponds to. Please provide any feedback related to that lab.</p>
  <p>All Hortonworks, partner and community tutorials are posted in the Hortonworks github and can be contributed via the <a href="https://github.com/hortonworks/tutorials/wiki">Hortonworks Tutorial Contribution Guide</a>.  If you are certain there is an issue or bug with the tutorial, please <a href="https://github.com/hortonworks/tutorials/wiki#issues-with-tutorials">create an issue</a> on the repository and we will do our best to resolve it!</p>
</div>
